---
- name: install cu
  apt:
    name: cu
    state: present

- name: install picocom
  apt:
    name: picocom
    state: present

- name: install voctomix-outcasts
  apt:
    name: voctomix-outcasts
    state: present

- name: push the script to connect to the opsis
  copy:
    src: files/opsis
    dest: /usr/local/bin/opsis
    owner: root
    group: root
    mode: 755

- name: push ingest systemd unit file
  copy:
    src: "files/{{ item.src }}"
    dest: "/etc/systemd/system/{{ item.dest }}"
    owner: root
    group: root
    mode: 644
  with_items:
    - { src: 'videoteam-ingest.service', dest: 'videoteam-ingest.service' }
    - { src: 'videoteam-ingest.path',    dest: 'videoteam-ingest.path' }
  notify: systemd videoteam-ingest
